<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Twin Design Elements - Form 3</title>
    <style>
        body {
            font-family: Inter, sans-serif;
            margin: 0;
            padding: 0;
            background-color: white;
        }
        .container {
            width: 100%;
            max-width: 1440px;
            margin: 0 auto;
            position: relative;
            background: white;
        }
        .header-bar {
            width: 839px;
            height: 21px;
            background: #F7A600;
            position: absolute;
            top: 133px;
            left: 28px;
        }
        .main-content {
            width: 1382px;
            height: 662px;
            background: #F2C2D0;
            position: absolute;
            top: 267px;
            left: 28px;
        }
        .subheader,
        .footer {
            width: 1383px;
            background: #AF1D59;
            position: absolute;
            left: 28px;
        }
        .subheader {
            height: 108px;
            top: 267px;
        }
        .footer {
            height: 256px;
            top: 673px;
        }
        .button {
            width: 310px; /* Adjusted width for smaller buttons */
            height: 50px;
            background: #E50046;
            position: absolute;
            text-align: center;
            color: white;
            font-size: 24px; /* Adjusted font size */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
        }
        .button.cnc {
            top: 425px;
            left: 85px;
        }
        .button.plc {
            top: 425px;
            left: 450px;
        }
        .button.drive {
            top: 425px;
            left: 810px;
        }
        .button.orchestrator {
            top: 500px;
            left: 82px;
        }
        .button.dcs {
            top: 500px;
            left: 450px;
        }
        .button.engine {
            top: 500px;
            left: 810px;
        }
        .button.selected {
            background: #b3003b;
            border: 3px solid #F7A600;
        }
        .input-box {
            width: 1263px;
            height: 60px;
            background: white;
            position: absolute;
            top: 600px;
            left: 82px;
        }
        .input-text {
            width: 1256px;
            height: 60px;
            position: absolute;
            top: 600px;
            left: 89px;
            text-align: center;
            color: #524E4E;
            font-size: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .text {
            position: absolute;
            color: white;
            text-align: center;
            font-size: 25px;
        }
        .text.header {
            width: 367px;
            height: 57px;
            top: 200px; /* Adjusted 5px deeper */
            left: 28px;
            background-color: #AF1D59;
            padding: 10px;
        }
        .text.main {
            width: 900px;
            height: 67px;
            color: #262626;
        }
        .text.type {
            top: 390px;
            left: -75px;
        }
        .text.name {
            top: 555px; /* Adjusted position */
            left: 50px;
        }
        .main-question {
            width: 1382px;
            height: 105px;
            position: absolute;
            top: 315px;
            left: 28px;
            text-align: center;
            color: white;
            font-size: 32px;
        }
        .info-text {
            width: 1280px;
            height: 164px;
            position: absolute;
            top: 736px;
            left: 90px; /* Adjusted to align with other sections */
            color: white;
            font-size: 20px;
            font-weight: 300;
        }
        .footer-title {
            width: 562px;
            height: 63px;
            position: absolute;
            top: 685px; /* Adjusted position */
            left: 55px; /* Adjusted to align with other sections */
            text-align: center;
            color: white;
            font-size: 32px;
        }
        .main-title {
            width: 868px;
            height: 104px;
            position: absolute;
            top: 31px;
            left: 28px;
            color: black;
            font-size: 50px;
        }
        .logo {
            width: 200px;
            height: 117px;
            position: absolute;
            top: 26px;
            left: 1228px;
        }
        .logo2 {
            width: 200px;
            height: 117px;
            position: absolute;
            top: 26px;
            left: 1015px;
        }
        .icon-container {
            position: absolute;
            top: 197px; /* Adjusted 5px higher */
            left: 841px; /* Adjusted to align further right */
            width: 550px;
            height: 75px;
            background-color: #AF1D59;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
        }
        .icon {
            width: 55px;
            height: 55px;
        }
        .icon.highlight {
            filter: invert(55%) sepia(100%) saturate(326%) hue-rotate(340deg) brightness(100%) contrast(101%);
        }
        .icon.eggshell {
            filter: invert(96%) sepia(13%) saturate(157%) hue-rotate(319deg) brightness(104%) contrast(87%);
        }
        .go-back,
        .next {
            width: 101px;
            height: 22px;
            position: absolute;
            font-size: 20px;
            font-weight: 700;
            color: rgb(221, 23, 23);
            cursor: pointer;
        }
        .go-back {
            top: 550px;
            left: -100px;
        }
        .next {
            top: 550px;
            left: 1450px;
        }
        .freitextfeld {
            width: 1256px;
            height: 69px;
            position: absolute;
            top: 596px; /* Adjusted position */
            left: 85px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .freitextfeld input {
            width: 100%;
            padding: 10px;
            font-size: 32px;
            border: 1px solid #ccc;
        }
        .button.disabled {
            background: #e0e0e0;
            cursor: not-allowed;
            pointer-events: none;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header-bar"></div>
    <div class="main-content"></div>
    <div class="subheader"></div>
    <div class="footer"></div>
    <div class="button cnc" onclick="toggleSelection('cnc')">CNC Control</div>
    <div class="button plc" onclick="toggleSelection('plc')">PLC</div>
    <div class="button drive" onclick="toggleSelection('drive')">Drive ECU</div>
    <div class="button orchestrator" onclick="toggleSelection('orchestrator')">Process Orchestrator</div>
    <div class="button dcs" onclick="toggleSelection('dcs')">DCS Controller</div>
    <div class="button engine" onclick="toggleSelection('engine')">Engine Control Unit</div>
    <div class="input-box"></div>
    <div class="freitextfeld">
        <input type="text" id="inputText" placeholder="Electronic Control Unit">
    </div>
    <div class="text header">Electronic Control Unit</div>
    <div class="text main type">Please choose (more than one selection is possible):</div>
    <div class="text main name">If none of the above mentioned is correct, please type in your solution here:</div>
    <div class="main-question">How is your physical object controlled?</div>
    <div class="footer-title">Helpful Information | External Links</div>
    <div class="info-text">Implementing Electronic Control Units (ECUs) involves specialized hardware, firmware, and software tools. ECUs use robust microcontrollers or microprocessors for real-time control, connected to various sensors and actuators. In the automotive industry, ECUs manage various vehicle functions. The Engine Control Unit optimizes engine performance and fuel efficiency. In advanced driver-assistance systems (ADAS), specific ECUs handle features like adaptive cruise control, lane-keeping assistance, and automated parking. In industrial automation, Programmable Logic Controllers (PLCs) are a type of ECU used to control machinery and processes. Each type of ECU is tailored to specific functions and environments, highlighting the versatility and importance of these units in modern technology.</div>
    <div class="main-title">In 10 Steps to Your Digital Twin:<br/>Defining Essential Design Elements</div>
    <img class="logo" src="logo.png" alt="Logo">
    <img class="logo2" src="Logo2.svg" alt="Logo 2">
    <div class="icon-container">
        <img class="icon eggshell" src="icon1.png" alt="Icon 1">
        <img class="icon eggshell" src="icon2.png" alt="Icon 2">
        <img class="icon highlight" src="icon3.png" alt="Icon 3">
        <img class="icon eggshell" src="icon4.png" alt="Icon 4">
        <img class="icon eggshell" src="icon5.png" alt="Icon 5">
        <img class="icon eggshell" src="icon6.png" alt="Icon 6">
        <img class="icon eggshell" src="icon7.png" alt="Icon 7">
        <img class="icon eggshell" src="icon8.png" alt="Icon 8">
        <img class="icon eggshell" src="icon9.png" alt="Icon 9">
        <img class="icon eggshell" src="icon10.png" alt="Icon 10">
    </div>
    <div class="go-back" onclick="history.back()">GO BACK</div>
    <div class="next" onclick="goToNextPage()">NEXT</div>
</div>

<script>
    let selectedButtons = new Set(); // To track the selected buttons

    // Restore state from localStorage
    function restoreState() {
        const storedButtons = JSON.parse(localStorage.getItem('digitalTwinControlTypeButton')) || [];
        const storedText = localStorage.getItem('digitalTwinControlTypeText') || '';
        const inputField = document.getElementById('inputText');

        // Restore text input
        inputField.value = storedText;

        // Handle button and text input state
        if (storedText.trim() !== '') {
            // If text exists, disable buttons
            const buttons = document.querySelectorAll('.button');
            buttons.forEach(button => {
                button.classList.remove('selected');
                button.classList.add('disabled');
            });
            inputField.disabled = false;
            inputField.style.backgroundColor = 'white';
        } else {
            // Restore selected buttons
            storedButtons.forEach(buttonText => {
                const button = Array.from(document.querySelectorAll('.button'))
                    .find(btn => btn.textContent === buttonText);
                if (button) {
                    button.classList.add('selected');
                    selectedButtons.add(button.textContent);
                }
            });

            // Disable text input if buttons are selected
            if (selectedButtons.size > 0) {
                inputField.disabled = true;
                inputField.style.backgroundColor = '#e0e0e0';
            }
        }
    }
    
    function toggleSelection(buttonClass) {
        const button = document.querySelector(`.button.${CSS.escape(buttonClass)}`);
        const inputField = document.getElementById('inputText');
        const buttonText = button.textContent;
    
        if (selectedButtons.has(buttonText)) {
            // Deselect the button
            button.classList.remove('selected');
            selectedButtons.delete(buttonText);
    
            // Enable the text input if no buttons are selected
            if (selectedButtons.size === 0) {
                inputField.disabled = false;
                inputField.style.backgroundColor = 'white';
            }
        } else {
            // Select the button
            button.classList.add('selected');
            selectedButtons.add(buttonText);
    
            // Save the text value before clearing and disabling
            localStorage.setItem('digitalTwinControlTypeText', inputField.value.trim());
    
            // Disable the text input
            inputField.disabled = true;
            inputField.value = ''; // Clear the text input
            inputField.style.backgroundColor = '#e0e0e0';
        }
    
        // Save state to localStorage
        saveState();
    }
    
    document.getElementById('inputText').addEventListener('input', function () {
        const buttons = document.querySelectorAll('.button');
        if (this.value.trim() !== '') {
            // Disable buttons when text is entered
            buttons.forEach(button => {
                button.classList.remove('selected');
                button.classList.add('disabled');
            });
            selectedButtons.clear(); // Clear all selected buttons
        } else {
            // Enable buttons when text is cleared
            buttons.forEach(button => {
                button.classList.remove('disabled');
                
                // Restore previously selected buttons if text is cleared
                const storedButtons = JSON.parse(localStorage.getItem('digitalTwinControlTypeButton')) || [];
                if (storedButtons.includes(button.textContent)) {
                    button.classList.add('selected');
                    selectedButtons.add(button.textContent);
                }
            });
        }
    
        // Save state to localStorage
        saveState();
    });
    
    function saveState() {
        // Save selected buttons and text input to localStorage
        localStorage.setItem('digitalTwinControlTypeButton', JSON.stringify(Array.from(selectedButtons)));
        localStorage.setItem('digitalTwinControlTypeText', document.getElementById('inputText').value.trim());
    }
    
    function goToNextPage() {
        const inputField = document.getElementById('inputText');
        let selectedTypes = Array.from(selectedButtons);
        const inputText = inputField.value.trim();
    
        if (selectedTypes.length === 0 && !inputText) {
            alert('Please select at least one button or enter text before proceeding.');
            return;
        }

        // Save state to localStorage
        saveState();

        // Navigate to the next page
        window.location.href = 'form4.html'; // Adjust this URL as needed
    }
    
    // Restore state on page load
    window.onload = restoreState;
</script>
</body>
</html>
