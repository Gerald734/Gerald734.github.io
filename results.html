<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Twin</title>
    <style>
        body {
            font-family: Inter, sans-serif;
            margin: 0;
            padding: 0;
            background-color: white;
        }
        .container {
            width: 1515px;
            height: 1100px;
            position: relative;
            background: white;
            margin: 0 auto;
        }
        .header-bar {
            width: 757px;
            height: 21px;
            background: #F7A600;
            position: absolute;
            top: 133px;
            left: 23px;
        }
        .main-title {
            width: 971px;
            height: 119px;
            color: black;
            font-size: 50px;
            font-weight: 400;
            position: absolute;
            top: 21px;
            left: 28px;
        }
        .logo {
            width: 200px;
            height: 117px;
            position: absolute;
            top: 26px;
            left: 1428px;
        }
        .logo2 {
            width: 200px;
            height: 117px;
            position: absolute;
            top: 26px;
            left: 1215px;
        }
        .main-content {
            width: 1382px;
            height: 535px;
            background: #F2C2D0;
            position: absolute;
            top: 350px;
            left: 28px;
        }
        .subheader { /*   das hier ist die box wo your digital twin archictecture drin steht   */
            width: 1600px;
            height: 108px;
            background: #AF1D59;
            position: absolute;
            top: 242px;
            left: 28px;
        }
        .footer {
            width: 1600px;
            height: 147px;
            background: #AF1D59;
            position: absolute;
            top: 885px;
            left: 29px;
        }
        .subheader-text {
            width: 1458px;
            height: 105px;
            text-align: center;
            color: white;
            font-size: 32px;
            font-weight: 400;
            position: absolute;
            top: 275px;
            left: 29px;
        }
        .subheader-text2 {
            width: 1458px;
            height: 105px;
            text-align: center;
            color: white;
            font-size: 32px;
            font-weight: 400;
            position: absolute;
            top: 275px;
            left: 785px;
        }
        .box {    /* box um die physische Maschine  */
            width: 246px;
            height: 305px;
            position: absolute;
            top: 545px;
            left: 122px;
            border-radius: 30px;
            border: 2px #524E4E solid;
        }
        .button {
            width: 175px;
            height: 33px;
            background: #E50046;
            border-radius: 5px;
            position: absolute;
            text-align: center;
            color: white;
            display: flex; /* Use flexbox for alignment */
    align-items: center; /* Center vertically */
    justify-content: center; /* Center horizontally */
            font-size: 12px;
            font-weight: 400;
        }
        .button.data-capturing {
            top: 792px;
            left: 162px;
        }
        .button.electronic-control-unit {
            top: 727px;
            left: 158px;
        }
        .button.data-transfer-module {
            top: 528px;
            left: 156px;
        }
        .icon {
            width: 90px;
            height: 90px;
            position: absolute;
            top: 606px;
            left: 200px;
        }
        .button.data-repository {
            top: 447px;
            left: 558px;
        }
        .button.other-data-sources {
            top: 432px;
            left: 158px;
        }
        .description-box {
            width: 439px;
            height: 443px;
            background: #E9560D;
            border-radius: 5px;
            position: absolute;
            top: 397px;
            left: 921px;
            color: white;
            font-size: 15px;
            font-weight: 400;
            text-align: justify;
            padding: 20px;
            box-sizing: border-box;
        }
        .description-text {
            text-decoration: underline;
        }
        .info {   /*  Gerald Kremer  */
            width: 1323px;
            height: 62px;
            color: white;
            font-size: 20px;
            font-weight: 300;
            position: absolute;
            top: 950px;
            left: 62px;
        }
        .info-title { /*  More Info  */
            width: 562px;
            height: 63px;
            color: white;
            font-size: 32px;
            font-weight: 400;
            position: absolute;
            top: 900px;
            left: 62px;
        }
        .button.twinning-engine {
            top: 672px;
            left: 560px;
        }
        .button.digital-twin-function {
            top: 606px;
            left: 562px;
        }
        .button.data-preprocessing {
            top: 507px;
            left: 562px;
        }
        .button.model-use {
            top: 780px;
            left: 562px;
        }
        .button.model-repository {
            top: 747px;
            left: 560px;
            text-align: center;
            color: #262626;
        }
        .arrow {
            position: absolute;
            border: 1px #524E4E solid;
        }
        .arrow.horizontal {
            height: 0px;
        }
        .arrow.vertical {
            width: 0px;
        }
        
        .arrow1 {
            width: 135px;
            left: 331px;
            top: 539px;
        }
        .arrow2 {     /* links vertikal oben */
            height: 80px;
            left: 466px;
            top: 460px;
            border-width: 0 1px;
        }
        .arrow3 {  /* rechts vertikal oben */
            height: 147px;
            left: 788px;
            top: 472px;
            border-width: 0 1px;
        }
        .arrow4 {    /* rechts vertikal unten */
            height: 98px;
            left: 788px;
            top: 688px;
            border-width: 0 1px;
        }
        .arrow5 {     /* rechts von model repository weggehend */
            width: 18px;
            left: 770px;
            top: 786px;
        }
        .arrow6 {      /* rechts von data repository weggehend */
            width: 18px;
            left: 770px;
            top: 472px;
        }
        .arrow7 {     /*  links hin zur twinning engine */
            width: 111px;
            left: 412px;
            top: 655px;
        }
        .arrow8 {      /*  vertikal unten links  */
            height: 90.02px;
            left: 411px;
            top: 655px;
            transform: rotate(180deg);
            border-width: 0 1px;
        }
        .arrow9 {    /*  von data source hin zur data repository  */
            width: 180px;
            left: 370px;
            top: 460px;
            transform: rotate(0.90deg);
        }
        .arrow10 {   /*  ganz rechts hin zur function  */
            width: 17px;
            left: 771px;
            top: 619px;
            transform: rotate(180deg);
        }
        .arrow11 {    /*  ganz rechts hin zur twinning engine  */
            width: 17px;
            left: 771px;
            top: 688px;
            transform: rotate(180deg);
        }
        .arrow12 {        /*  ganz unten links  */
            width: 43px;
            left: 368px;
            top: 744px;
            transform: rotate(-180deg);
        }
        .arrowhead1 {     /*  hin zum data repository  */
            width: 10px;
            height: 10px;
            position: absolute;
            top: 457px;
            left: 549px;
        }
        .arrowhead2 {     /* links unten  */
            width: 10px;
            height: 10px;
            position: absolute;
            top: 651px;
            left: 516px;
        }
        .arrowhead3 {     /*  rechts oben */
            width: 10px;
            height: 10px;
            position: absolute;
            top: 615px;
            left: 771px;
            transform: rotate(-180deg);
        }
        .arrowhead4 {     /*  rechts unten  */
            width: 10px;
            height: 10px;
            position: absolute;
            top: 684px;
            left: 771px;
            transform: rotate(-180deg);
        }
        .text {
            position: absolute;
            text-align: center;
            color: #262626;
            font-size: 12px;
            font-weight: 400;
            width: 175px; /* Set a consistent width for all text elements */
        }
        
        /* Adjust individual text positions */
        .text1 {/* enabled through */
            top: 648px;
            left: 560px;
        }
        .text2 {/* Name of your physical object */
            top: 573px;
            left: 158px; /* Align with the buttons */
        }
        .text3 {/* default data source */
            top: 431px;
            left: 558px; /* Align with buttons */
            color: white;
        }
        .text4 {/* preprocessed with */
            top: 485px;
            left: 558px; /* Align with buttons */
        }
        .text5 {/* data repository */
            top: 425px;
            left: 558px; /* Align with buttons */
        }
        .text6 {/* Digital Twin Functionality */
            top: 580px;
            left: 562px; /* Align with buttons */
        }
        .text7 {/* controlled by */
            top: 705px;
            left: 158px; /* Align with buttons */
        }
        .text8 {/* data captured through */
            top: 767px;
            left: 158px; /* Align with buttons */
        }
        .text9 {/* External data source */
            top: 400px;
            left: 158px; /* Align with buttons */
        }
        .text10 {/* Model Repository */
            top: 750px;
            left: 558px; /* Align with buttons */
        }
        .text11 {/* Digital Twin */
            top: 390px;
            left: 558px; /* Align with buttons */
        }
        .box1 {    /*  Box um External data source */
            width: 246px;
            height: 142px;
            position: absolute;
            top: 372px;
            left: 122px;
            border-radius: 30px;
            border: 2px #524E4E solid;
        }
        .box2 {     /*  Box um twinning engine  */
            width: 246px;
            height: 155px;
            position: absolute;
            top: 572px;
            left: 525px;
            border-radius: 30px;
            border: 1px #524E4E solid;
        }
        .box3 {   /*  große Box ganz rechts  */
            width: 311px;
            height: 475px;
            position: absolute;
            top: 371px;
            left: 494px;
            border-radius: 30px;
            border: 2px #524E4E solid;
        }
        .box4 {        /*  Box um Model Repository  */
            width: 246px;
            height: 88px;
            position: absolute;
            top: 738px;
            left: 524px;
            border-radius: 30px;
            border: 1px #524E4E solid;
        }
        .box5 {       /*  Box um Data Repository  */
            width: 246px;
            height: 142px;
            position: absolute;
            top: 418px;
            left: 524px;
            border-radius: 30px;
            border: 1px #524E4E solid;
        }
        .steps-container {
            cursor: pointer;
            position: absolute;
            top: 337px; 
            left: 1410px;
            width: 76px; 
            height: 535px;
            background-color: #AF1D59;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-radius: 5px;
        }
        .icon-text-container {
            width: 142px;
            height: 535px;
            background: #F2C2D0;
            position: absolute;
            top: 350px;
            left: 1486px;
            display: grid; 
            grid-template-rows: repeat(10, 1fr); 
            justify-items: center;
            align-items: center; 
            gap: 10px;
        }
        
        .icon-text {
            color: #333;
            font-size: 16px;
            padding: 5px;
            text-align: center;
            position: static;
            transform: none; 
        }
        .step-icon {
            width: 54px;
            height: 54px;
            filter: invert(96%) sepia(13%) saturate(157%) hue-rotate(319deg) brightness(104%) contrast(87%); /* Default eggshell color */
        }
        .step-icon.active {
            filter: invert(55%) sepia(100%) saturate(326%) hue-rotate(340deg) brightness(100%) contrast(101%); /* Highlighted color */
        }
        .step-icon:hover {
            opacity: 0.7; 
        }
        a {
            position: relative;
            z-index: 10; /* Make sure it's higher than any overlaying elements */
        }
        
    </style>
</head>
<body>

<div class="container">
    <div class="header-bar"></div>
    <div class="main-title">In 10 Steps to Your Digital Twin:<br/>Your Digital Twin of a FORM1.A</div>
    <img class="logo2" src="logo2.svg" alt="Logo 2" />
    <img class="logo" src="logo.png" alt="Logo" />
    <div class="main-content"></div>
    <div class="subheader"></div>
    <div class="footer"></div>
    <div class="subheader-text">Your Digital Twin System Architecture</div>
    <div class="subheader-text2">Go back to:</div>
    <div class="box"></div>
    <a href="form2.html">
        <div class="button data-capturing">Data Capturing</div>
    </a>
    <a href="form3.html">
        <div class="button electronic-control-unit">Electronic Control Unit</div>
    </a>
    <a href="form4.html">
        <div class="button data-transfer-module">Data Transfer Module</div>
    </a>
    <img class="icon" src="iconmachinetool.png" alt="Icon Machine Tool" />
    <a href="form6.html">
        <div class="button data-repository">Data Repository</div>
    </a>
    <a href="form5.html">
        <div class="button other-data-sources">Other Data Sources</div>
    </a>
    <div class="description-box">
        <span>We hope you had a great experience using our morphological box for designing the key components of your digital twin system architecture. Here is a short summary of your choices: <br/><br/>You want to create a digital twin for a <span class="description-text">FORM1.A</span>, or more precise a <span class="description-text">name of your physical object</span>. The <span class="description-text">name of your physical object</span> is controlled by a <span class="description-text">Electronic Control Unit</span>. Your Digital Twin will use shadow data that is captured by <span class="description-text">Data Capturing</span>. Your <span class="description-text">FORM1.A</span>. will transfer the data via a <span class="description-text">Data Transfer Module</span> to your data repository together with <span class="description-text">Other Data Sources</span>. In your data repository, a <span class="description-text">Data Repository</span> your shadow data will be preprocessed by <span class="description-text">Data Preprocessing</span>. To enable your digital twin to <span class="description-text">Digital Twin Function</span> your will use <span class="description-text">Twinning Engine</span>. The Twinning Engine will twin your shadow data with your <span class="description-text">Model Use</span> to get the relevant information and to <span class="description-text">Digital Twin Function</span> your <span class="description-text">Name of your physical object</span>. <br/><br/>If you have questions about the development of your digital twin please reach out to kremer@tu-berlin.de</span>
    </div>
    <div class="info">Gerald Kremer  |  Department of Industrial IT  |  TU Berlin  |  kremer@tu-berlin.de</div>
    <div class="info-title">More Information</div>
    <a href="form9.html">
        <div class="button twinning-engine">Twinning Engine</div>
    </a>
    <a href="form8.html">
        <div class="button digital-twin-function">Digital Twin Function</div>
    </a>
    <a href="form7.html">
        <div class="button data-preprocessing">Data Preprocessing</div>
    </a>
    <a href="form10.html">
        <div class="button model-use">Model Use</div>
    </a>
    <div class="arrow horizontal arrow1"></div>
    <div class="arrow vertical arrow2"></div>
    <div class="arrow vertical arrow3"></div>
    <div class="arrow vertical arrow4"></div>
    <div class="arrow horizontal arrow5"></div>
    <div class="arrow horizontal arrow6"></div>
    <div class="arrow horizontal arrow7"></div>
    <div class="arrow vertical arrow8"></div>
    <div class="arrow horizontal arrow9"></div>
    <div class="arrow horizontal arrow10"></div>
    <div class="arrow horizontal arrow11"></div>
    <div class="arrow horizontal arrow12"></div>
    <img class="arrowhead1" src="arrowhead1.png" alt="arrowhead1" />
    <img class="arrowhead2" src="arrowhead1.png" alt="arrowhead1" />
    <img class="arrowhead3" src="arrowhead1.png" alt="arrowhead1" />
    <img class="arrowhead4" src="arrowhead1.png" alt="arrowhead1" />
    <div class="text text1">enabled through</div>
    <div class="text text2">Name of your physical object</div>
    <div class="text text4">preprocessed with</div>
    <div class="text text5">Data Repository</div>
    <div class="text text6">Digital Twin Functionality</div>
    <div class="text text7">controlled by</div>
    <div class="text text8">data captured through</div>
    <div class="text text9">External data source</div>
    <div class="text text10">Model Repository</div>
    <div class="text text11">Digital Twin</div>
    <div class="box box1"></div>
    <div class="box box2"></div>
    <div class="box box3"></div>
    <div class="box box4"></div>
    <div class="box box5"></div>
    <div class="steps-container">
        <img class="step-icon active" src="icon1.png" alt="Icon 1" data-form="index.html">
        <img class="step-icon active" src="icon2.png" alt="Icon 2" data-form="form2.html">
        <img class="step-icon active" src="icon3.png" alt="Icon 3" data-form="form3.html">
        <img class="step-icon active" src="icon4.png" alt="Icon 4" data-form="form4.html">
        <img class="step-icon active" src="icon5.png" alt="Icon 5" data-form="form5.html">
        <img class="step-icon active" src="icon6.png" alt="Icon 6" data-form="form6.html">
        <img class="step-icon active" src="icon7.png" alt="Icon 7" data-form="form7.html">
        <img class="step-icon active" src="icon8.png" alt="Icon 8" data-form="form8.html">
        <img class="step-icon active" src="icon9.png" alt="Icon 9" data-form="form9.html">
        <img class="step-icon active" src="icon10.png" alt="Icon 10" data-form="form10.html">
    </div>
    <div class="icon-text-container">
        <div class="icon-text">Digital Twin Entity</div>
        <div class="icon-text">Data Capturing</div>
        <div class="icon-text">Elecronic Control Unit</div>
        <div class="icon-text">Data Transfer Module</div>
        <div class="icon-text">Other Data Sources</div>
        <div class="icon-text">Data Repository</div>
        <div class="icon-text">Data Preprocessing</div>
        <div class="icon-text">Digital Twin Function</div>
        <div class="icon-text">Twinning Engine</div>
        <div class="icon-text">Model Use</div>
    </div>
</div>

<script>

    // getValidValue is used if only either the text field or the button selection should be used
    // getConcatenatedValue uses both if they contain values
    function getValidValue(buttonKey, textKey, defaultValue) {
        let value = localStorage.getItem(buttonKey);
        if (value !== null) {
            try {
                let parsedValue = JSON.parse(value);
                if (Array.isArray(parsedValue) && parsedValue.length > 0) {
                    return parsedValue.join(', ');
                } else if (typeof parsedValue === 'string' && parsedValue.trim() !== '') {
                    return parsedValue;
                }
            } catch (e) {
                if (typeof value === 'string' && value.trim() !== '') {
                    return value;
                }
            }
        }
        value = localStorage.getItem(textKey);
        if (typeof value === 'string' && value.trim() !== '') {
            return value;
        }
        return defaultValue;
    }

    function getConcatenatedValue(buttonKey, textKey, defaultValue) {
        let buttonValue = localStorage.getItem(buttonKey);
        let textValue = localStorage.getItem(textKey);
        let result = '';
        if (buttonValue !== null) {
            try {
                let parsedButtonValue = JSON.parse(buttonValue);
                if (Array.isArray(parsedButtonValue) && parsedButtonValue.length > 0) {
                    result += parsedButtonValue.join(', ');
                } else if (typeof parsedButtonValue === 'string' && parsedButtonValue.trim() !== '') {
                    result += parsedButtonValue;
                }
            } catch (e) {
                if (typeof buttonValue === 'string' && buttonValue.trim() !== '') {
                    result += buttonValue;
                }
            }
        }
        if (result && textValue !== null) {
            if (typeof textValue === 'string' && textValue.trim() !== '') {
                result += ' ' + textValue;
            }
        } else if (textValue !== null) {
            if (typeof textValue === 'string' && textValue.trim() !== '') {
                result = textValue;
            }
        }
        return result.trim() !== '' ? result : defaultValue;
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        console.log('All localStorage items:', { ...localStorage });
        var digitalTwinObject = localStorage.getItem("digitalTwinObject") || 'Default Type';
        var digitalTwinName = localStorage.getItem("digitalTwinName") || 'Default Name';
        var digitalTwinDataType = getConcatenatedValue("digitalTwinDataButton", "digitalTwinDataText", "Default Data");
        var digitalTwinControlType = getConcatenatedValue("digitalTwinControlTypeButton", "digitalTwinControlTypeText", "Default Control Type");
        var digitalTwinDataTransfer = getConcatenatedValue("digitalTwinDataTransferButton", "digitalTwinDataTransferText", "Default Data Transfer");
        var digitalTwinDataSource = getValidValue("digitalTwinDataSourceButton", "digitalTwinDataSourceText", "Default Data Source");
        var digitalTwinRepository = getValidValue("digitalTwinRepositoryButton", "digitalTwinRepositoryText", "Data Repository");
        var digitalTwinPreProcessing = getValidValue("digitalTwinPreProcessingButton", "digitalTwinPreProcessingText", "Default Preprocessing");
        var digitalTwinFunction = getValidValue("digitalTwinFunctionButton", "digitalTwinFunctionText", "Default Function");
        var digitalTwinTwinningEngine = getValidValue("digitalTwinTwinningEngineButton", "digitalTwinTwinningEngineText", "Twinning Engine");
        var digitalTwinModel = getValidValue("digitalTwinModelButton", "digitalTwinModelText", "Default Model");
    
        // Get all elements except the specific text elements we want to exclude
        const excludeSelector = '.text.text1, .text.text4, .text.text5, .text.text6, .text.text7, .text.text8, .text.text9, .text.text10, .text.text11, .icon-text';
        const elementsToUpdate = document.querySelectorAll(`body *:not(${excludeSelector})`);
    
        elementsToUpdate.forEach(element => {
            if (element.childNodes.length === 1 && element.childNodes[0].nodeType === 3) {  // Text nodes only
                let newText = element.textContent;
                newText = newText.replace(/FORM1\.A/gi, digitalTwinObject);
                newText = newText.replace(/name of your physical object/gi, digitalTwinName);
                newText = newText.replace(/Data Capturing/gi, digitalTwinDataType);
                newText = newText.replace(/Electronic Control Unit/gi, digitalTwinControlType);
                newText = newText.replace(/Data Transfer Module/gi, digitalTwinDataTransfer);
                newText = newText.replace(/Other Data Sources/gi, digitalTwinDataSource);
                newText = newText.replace(/Data Repository/gi, digitalTwinRepository);
                newText = newText.replace(/Data Preprocessing/gi, digitalTwinPreProcessing);
                newText = newText.replace(/Digital Twin Function/gi, digitalTwinFunction);
                newText = newText.replace(/Twinning Engine/gi, digitalTwinTwinningEngine);
                newText = newText.replace(/Model Use/gi, digitalTwinModel);
                element.textContent = newText;
            }
        });
    
        const imageMapping = {
            'Default Type': 'iconmachinetool.png',
            'Machine Tool': 'iconmachinetool.png',
            'Process': 'iconprocess.png',
            'Product': 'iconproduct.png',
        };
        var icon = document.querySelector("img.icon");
        var imageFilename = imageMapping[digitalTwinObject]; 
        if (icon) {
            icon.src = imageFilename;
        }
    
        // Reattach event listener after DOM manipulation
        const stepsContainer = document.querySelector('.steps-container');
        if (stepsContainer) {
            stepsContainer.addEventListener('click', function(event) {
                console.log("Click registered on steps container");
                const target = event.target;
                if (target.classList.contains('step-icon')) {
                    const form = target.getAttribute('data-form');
                    if (form) {
                        console.log("Redirecting to:", form);
                        window.location.href = form;
                    } else {
                        console.error("data-form attribute not found on target");
                    }
                }
            });
        } else {
            console.error("stepsContainer element not found");
        }

        const mainTitleElement = document.querySelector('.main-title');
        if (mainTitleElement) {
            let newText = mainTitleElement.innerHTML;
            newText = newText.replace(/FORM1\.A/gi, digitalTwinObject);
            newText = newText.replace(/name of your physical object/gi, digitalTwinName);
            mainTitleElement.innerHTML = newText;
        }
    });
    
</script>

</body>
</html>
